<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>iOS Shortcuts Versions API</title>
<style>
  body {
    font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 2rem;
    background: #0a0a0a;
    color: #ffffff;
    line-height: 1.6;
    min-height: 100vh;
  }
  h1 {
    font-size: 2.2rem;
    margin-bottom: 0.5rem;
    background: linear-gradient(135deg, #007aff, #5ac8fa, #ff9500);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
  }
  h2 {
    font-size: 1.4rem;
    margin-top: 2rem;
    color: #5ac8fa;
    font-weight: 600;
  }
  code, pre {
    background: #1a1a1a;
    color: #e0e0e0;
    padding: 0.25rem 0.5rem;
    border-radius: 8px;
    font-family: 'SF Mono', Monaco, monospace;
    border: 1px solid #333;
  }
  pre { padding: 1rem; overflow-x: auto; }
  .card {
    background: #111111;
    border: 1px solid #333;
    border-radius: 16px;
    padding: 1.5rem;
    margin: 1rem 0;
    box-shadow: 0 4px 20px rgba(0, 122, 255, 0.1);
  }
  .shortcut-item {
    background: #161616;
    border: 1px solid #444;
    border-radius: 12px;
    padding: 1.25rem;
    margin: 0.75rem 0;
    transition: all 0.3s ease;
  }
  .shortcut-item:hover {
    border-color: #007aff;
    box-shadow: 0 4px 16px rgba(0, 122, 255, 0.2);
    transform: translateY(-2px);
  }
  .shortcut-name {
    font-weight: 600;
    font-size: 1.2rem;
    margin-bottom: 0.75rem;
    color: #ffffff;
  }
  .shortcut-details {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.5rem 1rem;
    font-size: 0.9rem;
  }
  .detail-label { color: #999; }
  .detail-value {
    font-weight: 500;
    color: #e0e0e0;
  }
  .download-btn {
    display: inline-block;
    background: linear-gradient(135deg, #007aff, #5ac8fa);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 10px;
    text-decoration: none;
    margin-top: 0.75rem;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 2px 10px rgba(0, 122, 255, 0.3);
  }
  .download-btn:hover {
    background: linear-gradient(135deg, #0056b3, #4dabf7);
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 122, 255, 0.4);
  }
  .api-info {
    background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
    border: 1px solid #444;
  }
  .endpoint {
    background: linear-gradient(135deg, #001a2e, #003d5c);
    border-left: 4px solid #007aff;
  }
  .creator {
    text-align: center;
    margin: 2rem 0;
    padding: 1rem;
    background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
    border-radius: 12px;
    border: 1px solid #333;
  }
  .creator-name {
    font-size: 1.1rem;
    font-weight: 600;
    background: linear-gradient(135deg, #ff9500, #ffcc00);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.25rem;
  }
  .creator-title {
    color: #999;
    font-size: 0.9rem;
  }
  .status-loading { color: #5ac8fa; }
  .status-success { color: #30d158; }
  .status-error { color: #ff3b30; }
</style>
</head>
<body>
  <div class="creator">
    <div class="creator-name">Ian Musa</div>
    <div class="creator-title">iOS Shortcuts Developer</div>
  </div>

  <h1>üì± iOS Shortcuts Versions API</h1>
  <p>Live versions database for iOS Shortcuts with direct download links. Perfect for version checking from within Shortcuts app.</p>

  <div class="card endpoint">
    <h2>üì° API Endpoint</h2>
    <p><strong>JSON API:</strong> <code id="api-url">Loading...</code></p>
    <p>Use this URL in your iPhone Shortcuts to get the latest versions as JSON.</p>
  </div>

  <div class="card">
    <div id="status">Loading shortcuts database...</div>
    <div id="content" hidden>
      <h2>üöÄ Available Shortcuts</h2>
      <div id="shortcuts-list"></div>
    </div>
  </div>

  <div class="card api-info">
    <h2>üìä API Information</h2>
    <div id="api-stats">Loading...</div>
  </div>

  <script>
    async function load() {
      const status = document.getElementById('status');
      const content = document.getElementById('content');
      const shortcutsList = document.getElementById('shortcuts-list');
      const apiStats = document.getElementById('api-stats');
      const apiUrl = document.getElementById('api-url');

      const currentUrl = window.location.origin + window.location.pathname.replace('index.html', '') + 'versions.json';
      apiUrl.textContent = currentUrl;

      try {
        const res = await fetch('./versions.json', { cache: 'no-cache' });
        if (!res.ok) throw new Error(`Failed to fetch versions.json: ${res.status}`);
        const data = await res.json();

        status.innerHTML = `<span class="status-success">‚úÖ Loaded ${Object.keys(data.shortcuts || {}).length} shortcuts</span>`;
        content.hidden = false;

        // Display shortcuts
        shortcutsList.innerHTML = '';
        const shortcuts = data.shortcuts || {};

        if (Object.keys(shortcuts).length === 0) {
          shortcutsList.innerHTML = '<p>No shortcuts available yet.</p>';
        } else {
          for (const [key, item] of Object.entries(shortcuts)) {
            const shortcutDiv = document.createElement('div');
            shortcutDiv.className = 'shortcut-item';

            shortcutDiv.innerHTML = `
              <div class="shortcut-name">${item.name || key}</div>
              <div class="shortcut-details">
                <span class="detail-label">Version:</span>
                <span class="detail-value">v${item.version || 'Unknown'}</span>
                <span class="detail-label">Updated:</span>
                <span class="detail-value">${item.last_updated || 'Unknown'}</span>
                <span class="detail-label">ID:</span>
                <span class="detail-value">${key}</span>
              </div>
              ${item.description ? `<p style="margin: 0.5rem 0; color: #666; font-size: 0.9rem;">${item.description}</p>` : ''}
              ${item.download_url ? `<a href="${item.download_url}" class="download-btn">üì• Download Shortcut</a>` : ''}
            `;

            shortcutsList.appendChild(shortcutDiv);
          }
        }

        // Display API info
        const apiInfo = data.api_info || {};
        apiStats.innerHTML = `
          <div class="shortcut-details">
            <span class="detail-label">API Version:</span>
            <span class="detail-value">${apiInfo.version || 'Unknown'}</span>
            <span class="detail-label">Last Updated:</span>
            <span class="detail-value">${apiInfo.last_updated || 'Unknown'}</span>
            <span class="detail-label">Total Shortcuts:</span>
            <span class="detail-value">${apiInfo.total_shortcuts || Object.keys(shortcuts).length}</span>
          </div>
        `;

      } catch (err) {
        status.innerHTML = `<span class="status-error">‚ùå Error: ${err.message}</span>`;
        console.error('Failed to load shortcuts:', err);
      }
    }

    load();
  </script>
</body>
</html>
